<mxfile host="app.diagrams.net" modified="2023-06-10T07:12:14.686Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36" etag="S4dh8z-WE62dJd75aoGp" version="21.1.9" type="github">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="Page-1">
    <mxGraphModel dx="1434" dy="708" grid="0" gridSize="10" guides="1" tooltips="1" connect="0" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="1600" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="lb-UdrI12HoVChS3GGsR-3" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="lb-UdrI12HoVChS3GGsR-1" target="lb-UdrI12HoVChS3GGsR-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-1" value="开始" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.start_1;whiteSpace=wrap;fontSize=20;rounded=1;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="345" y="65" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-6" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="lb-UdrI12HoVChS3GGsR-2" target="lb-UdrI12HoVChS3GGsR-5">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="393" y="341" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-7" value="更新转赠人的优惠券为赠送中状态" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=20;" vertex="1" connectable="0" parent="lb-UdrI12HoVChS3GGsR-6">
          <mxGeometry x="-0.5214" y="1" relative="1" as="geometry">
            <mxPoint x="1" y="2" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-2" value="发起转赠" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="335" y="178" width="120" height="48" as="geometry" />
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-20" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="lb-UdrI12HoVChS3GGsR-5" target="lb-UdrI12HoVChS3GGsR-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-5" value="用户优惠券表" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.database;whiteSpace=wrap;rounded=1;fontSize=18;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="328" y="306" width="124" height="101" as="geometry" />
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-14" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="lb-UdrI12HoVChS3GGsR-8" target="lb-UdrI12HoVChS3GGsR-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-8" value="生成分享链接" style="rounded=0;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="314.25" y="629" width="151.5" height="73" as="geometry" />
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-11" value="分享链接信息备注&lt;br style=&quot;font-size: 20px;&quot;&gt;shop_id&lt;br style=&quot;font-size: 20px;&quot;&gt;coupon_id(标识哪张券)&lt;br style=&quot;font-size: 20px;&quot;&gt;send_phone(标识赠送人)&lt;br style=&quot;font-size: 20px;&quot;&gt;snapshot_id(标识哪个版本)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="489.5" y="602.5" width="253" height="126" as="geometry" />
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-17" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="lb-UdrI12HoVChS3GGsR-13">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="390" y="886" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-13" value="领取" style="rounded=0;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="314.25" y="749" width="151.5" height="73" as="geometry" />
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-25" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="lb-UdrI12HoVChS3GGsR-16" target="lb-UdrI12HoVChS3GGsR-24">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-26" value="没有" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=17;" vertex="1" connectable="0" parent="lb-UdrI12HoVChS3GGsR-25">
          <mxGeometry x="0.1644" y="-1" relative="1" as="geometry">
            <mxPoint x="-8" y="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-27" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="lb-UdrI12HoVChS3GGsR-16">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="390" y="1076" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-16" value="判断转赠临时表&lt;br style=&quot;font-size: 18px;&quot;&gt;是否有记录" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.decision;whiteSpace=wrap;rounded=1;fontSize=18;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="290.5" y="886" width="199" height="126" as="geometry" />
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-22" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="lb-UdrI12HoVChS3GGsR-19" target="lb-UdrI12HoVChS3GGsR-8">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-19" value="转赠临时表" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.database;whiteSpace=wrap;rounded=1;fontSize=18;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="328" y="480" width="124" height="101" as="geometry" />
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-21" value="优惠券转赠临时表新增一条记录" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=20;" vertex="1" connectable="0" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="398" y="433" as="geometry" />
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-24" value="已被领取/撤回/退回" style="rounded=0;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="602" y="912.5" width="151.5" height="73" as="geometry" />
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-28" value="有" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=17;" vertex="1" connectable="0" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="565.5" y="960" as="geometry">
            <mxPoint x="-176" y="81" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-37" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="lb-UdrI12HoVChS3GGsR-33" target="lb-UdrI12HoVChS3GGsR-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-33" value="1 更新赠送人的券的接收人手机号及状态&lt;br&gt;2 插入新的一条优惠券记录(记录赠送人信息)&lt;br&gt;3 删除转赠临时表记录" style="rounded=0;whiteSpace=wrap;html=1;fontSize=20;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="283.62" y="1076" width="228.75" height="136" as="geometry" />
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-41" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="lb-UdrI12HoVChS3GGsR-36" target="lb-UdrI12HoVChS3GGsR-40">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-36" value="用户优惠券表" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.database;whiteSpace=wrap;rounded=1;fontSize=18;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="336" y="1272" width="124" height="101" as="geometry" />
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-40" value="结束" style="strokeWidth=2;html=1;shape=mxgraph.flowchart.terminator;whiteSpace=wrap;rounded=1;fontSize=18;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="348" y="1421" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="lb-UdrI12HoVChS3GGsR-42" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;b&gt;防止多人领取&lt;/b&gt;&lt;br&gt;更新过程需要保证优惠券状态是从赠送中到领取,否则视为失败&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="WIyWlLk6GJQsqaUBKTNV-1">
          <mxGeometry x="128" y="1091" width="141" height="70" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
